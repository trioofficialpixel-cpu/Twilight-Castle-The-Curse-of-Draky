extends Sprite2D
 
@onready var audio: AudioStreamPlayer2D = $AudioStreamPlayer2D
@onready var audio_activate: AudioStream = preload("res://sound-effecs/bars_open.wav")
@onready var audio_deactivate: AudioStream = preload("res://sound-effecs/unlock_door.wav")
func open_door():
	frame = 5
	%DoorCollision.set_deferred("disabled", true)
	$Sprite2D/Dialogue2D/CollisionShape2D.set_deferred("disabled", true)
	$Sprite2D/Dialogue2D/Dialogue2D2/CollisionShape2D.set_deferred("disabled", true)
	play_audio(audio_activate)
 
func close_door():
	frame = 1
	%DoorCollision.set_deferred("disabled", false)
	$Sprite2D/Dialogue2D/CollisionShape2D.set_deferred("disabled", false)
	$Sprite2D/Dialogue2D/Dialogue2D2/CollisionShape2D.set_deferred("disabled", false)
func _on_player_entered(body):
	open_door()
	play_audio(audio_deactivate)
	
func _on_player_exited(body):
	close_door()

func play_audio(_stream: AudioStream) -> void:
	audio.stream = _stream
	audio.play()
